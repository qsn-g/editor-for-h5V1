webpackJsonp([2],{"1T+f":function(e,t){},"8lc/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),i=n("Dd8w"),o=n.n(i),c=n("exGp"),u=n.n(c),s=n("N/5j"),d=n("Lxn6"),l=n("V142"),f={data:function(){return{webList:[],uName:!1,loading:!1}},beforeMount:function(){this.getPageList()},methods:{getPageList:function(){var e=this;return u()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Object(s.a)({url:"/getPageList"});case 4:t.sent.data.forEach(function(t){e.webList.push(o()({},t,{date:Object(d.j)(t.mTime)}))}),e.loading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),Object(l.a)("网络出错"),e.loading=!1;case 13:case"end":return t.stop()}},t,e,[[1,9]])}))()},newEditor:function(e){var t=this;return u()(a.a.mark(function n(){var r,i,o,c;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e._id,i=e.webName,o={},!r){n.next=7;break}return n.next=5,Object(s.a)({url:"/getPageData",data:{_id:r}});case 5:c=n.sent,o=c.data;case 7:t.loading=!0,t.$router.push({name:"webEditor",params:{_id:r,webName:i,webJson:o}});case 9:case"end":return n.stop()}},n,t)}))()},updateName:function(e,t){var n=this;return u()(a.a.mark(function r(){var i,o,c;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n.uName=!1,r.prev=1,i=e.target.innerText,o=t.webName,/\S/.test(i)){r.next=8;break}return Object(l.a)("必须输入字符"),e.target.innerText=o,r.abrupt("return");case 8:if(i!==o){r.next=10;break}return r.abrupt("return");case 10:return t.webName=i,r.next=13,Object(s.a)({url:"/updateName",data:{webId:t._id,webName:t.webName}});case 13:c=r.sent,Object(l.b)(c.data),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(1),Object(l.a)(r.t0);case 20:case"end":return r.stop()}},r,n,[[1,17]])}))()},deletePage:function(e){var t=this;return u()(a.a.mark(function n(){var r,i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(s.a)({url:"/removeWeb",data:{webId:e}});case 2:r=n.sent,i=t.webList.indexOf(t.webList.find(function(t){return t._id===e})),t.webList.splice(i,1),Object(l.b)(r.data);case 6:case"end":return n.stop()}},n,t)}))()}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"webTable"}},[n("el-row",{staticClass:"buttonList"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"medium",circle:""},on:{click:function(t){return e.newEditor({webName:"新建编辑"})}}})],1),e._v(" "),n("el-row",{staticClass:"table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.webList,"default-sort":{prop:"date",order:"descending"}}},[n("el-table-column",{attrs:{type:"index"}}),e._v(" "),n("el-table-column",{attrs:{label:"页面id"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",{staticStyle:{"user-select":"text"}},[e._v(e._s(r._id))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"更新时间",prop:"date",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{label:"网页名称",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("label",{attrs:{contenteditable:e.uName},on:{dblclick:function(){e.uName=!0},blur:function(n){return e.updateName(n,t.row)}}},[e._v(e._s(t.row.webName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{circle:"",type:"primary",icon:"el-icon-edit"},on:{click:function(n){return e.newEditor(t.row)}}}),e._v(" "),n("el-button",{attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(n){return e.deletePage(t.row._id)}}})]}}])})],1)],1)],1)},staticRenderFns:[]};var p=n("VU/8")(f,b,!1,function(e){n("1T+f")},"data-v-41197c73",null);t.default=p.exports},Lxn6:function(e,t,n){"use strict";n.d(t,"j",function(){return o}),n.d(t,"h",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"f",function(){return f}),n.d(t,"a",function(){return b}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return d}),n.d(t,"i",function(){return p}),n.d(t,"g",function(){return m});var r=n("NfQX"),a=n.n(r),i=n("UjCS"),o=function(e){var t=new Date(e);return t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日 "+t.getHours()+":"+(t.getMinutes()>=10?t.getMinutes():"0"+t.getMinutes())},c=function e(t){var n=t||[],r=a()();return n.find(function(e){return e.id===r})&&(r=e(t)),r},u=function(e){var t={};return e.keys().map(e).forEach(function(e){t[e.default.name]=e.default}),t},s=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.a.state.webJson;if(r.id===t)return n(r),!0;r.childNodes&&r.childNodes.some(function(r){return e(t,n,r)})},d=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.a.state.webJson;if(r.childNodes&&r.childNodes.some(function(e){return e.id===t}))return n(r),!0;r.childNodes&&r.childNodes.some(function(r){return e(t,n,r)})},l=function(e,t){t.$data.struct=e},f=function(e){var t={name:e.name,id:e.id,options:{style:{}}};return"Jcontainer"===e.name&&(t.childNodes=[]),t},b=function(e){if(i.a.state.webJson.id){var t=i.a.state.focusElem,n=i.a.state.componentList;!function e(t,n,r){if(t.id===n)return t.childNodes.push(r),!0;t.childNodes&&t.childNodes.some(function(t){return e(t,n,r)})}(i.a.state.webJson,t.id,e),d(e.id,function(e){e.childNodes.some(function(t,n){return!t.id&&(e.childNodes.splice(n,1),!0)})}),n.some(function(e,t){return!e.cJson.id&&(n.splice(t,1),!0)})}else i.a.state.webJson=e},p=function e(t){t.childNodes&&t.childNodes.forEach(function(t){e(t)});var n=i.a.state.componentList;n.some(function(e,r){return e.id===t.id&&(n.splice(r,1),!0)})},m=function(e){window.open(e)}},NfQX:function(e,t,n){var r=self.crypto||self.msCrypto;e.exports=function(e){e=e||21;for(var t="",n=r.getRandomValues(new Uint8Array(e));0<e--;)t+="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-"[63&n[e]];return t}}});
//# sourceMappingURL=2.ced2e1603efd3275a549.js.map